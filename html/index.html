<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>nodejs-ilang-speaker</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery-3.5.1.min.js"></script>
</head>
<body>
    <div class="container" style="margin-top:30px;">
        <div class="form-group">
            <label for="exampleInputEmail1">信息：</label>
            <textarea id="msg" rows="10" class="form-control" aria-label="With textarea"></textarea>
        </div>

        <div class="input-group">
            <button type="button" class="btn btn-primary btn-block" id="send">发送</button>
            <button type="button" class="btn btn-outline-dark btn-block" id="clear">清空</button>
        </div>
    </div>
</body>
<script>
    // var baseURL = 'http://192.168.1.4:9999';
    var baseURL = 'http://localhost:9999';
    $('#clear').click(function(){
        $('#msg').val('');
    });
    $('#send').click(function(){
        var msg = $('#msg').val();
        if(msg) {
            $.ajax({
                url:baseURL + '/speaker?msg=' + msg,
                method:"post",
                dataType:'json',
                headers:{
                    token:'abc'
                },
                data:{
                    msg:msg
                },
                success:function(res){
                    console.log(res);
                }
            });
        }
    });
</script>
</html>